"use strict";(globalThis.webpackChunk_lyrasearch_docs=globalThis.webpackChunk_lyrasearch_docs||[]).push([[7371],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(n),c=r,k=d["".concat(p,".").concat(c)]||d[c]||m[c]||l;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[d]="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1742:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const l={},i="Facets",o={unversionedId:"usage/search/facets",id:"usage/search/facets",title:"Facets",description:"Available since v0.4.4",source:"@site/docs/03-usage/search/03-facets.md",sourceDirName:"03-usage/search",slug:"/usage/search/facets",permalink:"/usage/search/facets",draft:!1,editUrl:"https://github.com/lyrasearch/docs/tree/main/docs/03-usage/search/03-facets.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"main",previous:{title:"Fields Boosting",permalink:"/usage/search/field-boosting"},next:{title:"Filters",permalink:"/usage/search/filters"}},p={},s=[{value:"String facets",id:"string-facets",level:3},{value:"Number facets",id:"number-facets",level:3},{value:"Boolean facets",id:"boolean-facets",level:3}],u={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"facets"},"Facets"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Available since ",(0,r.kt)("inlineCode",{parentName:"p"},"v0.4.4"))),(0,r.kt)("admonition",{title:"Experimental",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Facets are still in ",(0,r.kt)("strong",{parentName:"p"},"experimental")," phase.\nIf you find an bug, please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/LyraSearch/lyra/issues"},"open an issue"))),(0,r.kt)("p",null,"Lyra ",(0,r.kt)("inlineCode",{parentName:"p"},"v0.4.4")," introduces experimental support for ",(0,r.kt)("strong",{parentName:"p"},"facets"),", a powerful tool for filtering and narrowing down search results on the Lyra search engine."),(0,r.kt)("p",null,"With the Lyra Faceted Search API, users can filter their search results by various criteria, such as category, price range, or other attributes, making it easier to find the information they need. Whether you're building a website, mobile app, or any other application, the Lyra Faceted Search API is the perfect solution for adding faceted search functionality to your project."),(0,r.kt)("p",null,"Given the following Lyra schema:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { create } from '@lyrasearch/lyra'\n\nconst db = await create({\n  schema: {\n    title: 'string',\n    description: 'string',\n    categories: {\n      primary: 'string',\n      secondary: 'string',\n    },\n    rating: 'number',\n    isFavorite: 'boolean',\n  }\n})\n")),(0,r.kt)("p",null,"Lyra will be able to generate facets at search-time based on the schema.\nTo do so, we need to specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"facets")," property in the ",(0,r.kt)("inlineCode",{parentName:"p"},"search")," configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const results = await search(db, {\n  term: 'Movie about cars and racing',\n  properties: ['description'],\n  facets: {\n    'categories.first': {\n      size: 3,\n      order: 'DESC',\n    },\n    'categories.second': {\n      size: 2,\n      order: 'DESC',\n    },\n    rating: {\n      ranges: [\n        { from: 0, to: 3 },\n        { from: 3, to: 7 },\n        { from: 7, to: 10 },\n      ]\n    },\n    isFavorite: {\n      true: true,\n      false: true,\n    },\n  }\n})\n")),(0,r.kt)("p",null,"This will generate the following result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{\n  elapsed: ...,\n  count: ...,\n  hits: { ... },\n  facets: {\n    'categories.first': {\n      count: 14,\n      values: {\n        'Action': 4,\n        'Adventure': 3,\n        'Comedy': 2,\n      }\n    },\n    'categories.second': {\n      count: 14,\n      values: {\n        'Cars': 4,\n        'Racing': 3,\n      }\n    },\n    rating: {\n      count: 3,\n      values: {\n        '0-3': 5,\n        '3-7': 15,\n        '7-10': 80,\n      }\n    },\n    isFavorite: {\n      count: 2,\n      values: {\n        'true': 5,\n        'false': 95,\n      }\n    },\n  }\n}\n")),(0,r.kt)("p",null,"As you may have noticed, the ",(0,r.kt)("inlineCode",{parentName:"p"},"facets")," property is an ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," that contains different\nconfigurations depending on the property type specified in the schema."),(0,r.kt)("h3",{id:"string-facets"},"String facets"),(0,r.kt)("p",null,"If a property is specified as ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," in the schema, the facet will accept the following\nconfiguration:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"size")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"10")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of values to return.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"order")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DESC")),(0,r.kt)("td",{parentName:"tr",align:null},"Order of the values. Can be either ",(0,r.kt)("inlineCode",{parentName:"td"},"ASC")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"DESC"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"limit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"100")),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum number of values to consider.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"offset")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of values to skip.")))),(0,r.kt)("p",null,"In the search result, ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," facets will be returned as an ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," with the following properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{\n  count: 14,            // Total number of values, now limited to 3 (size)\n  values: {\n    'Action': 4,        // Number of documents that have this value\n    'Adventure': 3,     // Number of documents that have this value\n    'Comedy': 2,        // Number of documents that have this value\n  }\n}\n")),(0,r.kt)("h3",{id:"number-facets"},"Number facets"),(0,r.kt)("p",null,"If a property is specified as ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," in the schema, the facet will accept the following\nconfiguration:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ranges")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"array")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"[]")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of ranges to consider.")))),(0,r.kt)("p",null,"Each range is an ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," with the following properties:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"from")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"Minimum value of the range.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"to")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum value of the range.")))),(0,r.kt)("p",null,"In the search result, ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," facets will be returned as an ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," with the following properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{\n  count: 3,             // Total number of ranges\n  values: {\n    '0-3': 5,           // Number of documents that have a value between 0 and 3 (inclusive)\n    '3-7': 15,          // Number of documents that have a value between 3 and 7 (inclusive)\n    '7-10': 80,         // Number of documents that have a value between 7 and 10 (inclusive)\n  }\n}\n")),(0,r.kt)("p",null,"Please note that the ",(0,r.kt)("inlineCode",{parentName:"p"},"from")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"to")," values are ",(0,r.kt)("strong",{parentName:"p"},"inclusive"),". Note also that the order of the ranges\nis guaranteed as specified in the configuration."),(0,r.kt)("h3",{id:"boolean-facets"},"Boolean facets"),(0,r.kt)("p",null,"If a property is specified as ",(0,r.kt)("inlineCode",{parentName:"p"},"boolean")," in the schema, the facet will accept the following\nconfiguration:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to consider ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," values.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to consider ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," values.")))),(0,r.kt)("p",null,"In the search result, ",(0,r.kt)("inlineCode",{parentName:"p"},"boolean")," facets will be returned as an ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," with the following properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{\n  count: 2,             // Total number of values\n  values: {\n    'true': 5,          // Number of documents that have a `true` value\n    'false': 95,        // Number of documents that have a `false` value\n  }\n}\n")))}d.isMDXComponent=!0}}]);